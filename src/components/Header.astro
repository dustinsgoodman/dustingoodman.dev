---
import HeaderLink from '@/components/HeaderLink.astro';
import ThemeToggle from '@/components/ThemeToggle.astro';
import Logo from '@/components/Logo.astro';
import MenuIcon from './Icons/MenuIcon.astro';
import CloseIcon from './Icons/CloseIcon.astro';

const links = [
	{ href: '/about', text: 'About' },
	{ href: '/community', text: 'Community' },
	{ href: '/blog', text: 'Blog' },
];
---

<header
	class="sticky top-0 z-50 flex items-center bg-white px-8 py-4 drop-shadow dark:bg-black"
>
	<Logo />

	<div class="ml-auto flex items-end space-x-4">
		{links.map((link) => <HeaderLink href={link.href}>{link.text}</HeaderLink>)}
		<span
			class="hidden md:block border-b border-transparent py-1 text-base uppercase leading-6 text-gray-500 hover:border-blue-600 hover:text-blue-600 hover:no-underline focus:text-blue-600 dark:text-blue-100 dark:hover:border-sky-400 dark:hover:text-sky-400 dark:focus:text-sky-400"
		>
			<ThemeToggle className="align-middle" />
		</span>
		<button
			onclick="document.querySelector('#mobile-nav-menu').showModal()"
			aria-label="Open navigation menu"
			class="md:hidden"
		>
			<MenuIcon className="text-xl" />
		</button>
	</div>
	<dialog
		id="mobile-nav-menu"
		class="fixed left-auto right-0 top-0 bottom-0 h-svh max-h-svh m-0 p-0 transition-transform duration-1000 ease-in-out translate-x-full open:translate-x-0"
	>
		<div class="relative h-full flex flex-col p-4">
			<div class="text-right">
				<button
					class="text-2xl"
					onclick="document.querySelector('#mobile-nav-menu').close()"
				>
					<CloseIcon />
				</button>
			</div>
			<ul class="h-full flex flex-col list-none p-0 mx-0 my-8 basis-full">
				{
					links.map((link) => (
						<li class="px-4 py-2 m-1">
							<a href={link.href}>{link.text}</a>
						</li>
					))
				}
				<li class="px-4 py-2 m-1 mt-auto text-center">
					<span
						class="block border-b border-transparent py-1 text-base uppercase leading-6 text-gray-500 hover:border-blue-600 hover:text-blue-600 hover:no-underline focus:text-blue-600 dark:text-blue-100 dark:hover:border-sky-400 dark:hover:text-sky-400 dark:focus:text-sky-400"
					>
						<ThemeToggle className="align-middle" />
					</span>
				</li>
			</ul>
		</div>
	</dialog>
</header>
