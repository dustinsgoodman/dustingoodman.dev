---
import BaseLayout from '@/layouts/base.astro';
import HeroBanner from '@/components/HeroBanner.astro';
import AboutSection from '@/components/AboutSection.astro';
import BlogPreviewSection from '@/components/BlogPreviewSection.astro';

const blogPosts = await Astro.glob('./blog/**/*.md');
const recentBlogPosts = blogPosts
  .filter(
    ({ frontmatter }) => !!frontmatter.publishDate && !frontmatter.redirectUrl
  )
  .sort(
    (a, b) =>
      new Date(b.frontmatter.publishDate).valueOf() -
      new Date(a.frontmatter.publishDate).valueOf()
  )
  .map(({ url, frontmatter }) => {
    return {
      ...frontmatter,
      url,
    };
  })
  .slice(0, 4);
---

<BaseLayout
  title="Welcome | Dustin Goodman"
  description="Dustin Goodman: Developer, Speaker, and Writer..."
  enableWrapper={false}
  enableVerticalPadding={false}
>
  <HeroBanner />
  <AboutSection />
  <BlogPreviewSection blogPosts={recentBlogPosts} />
</BaseLayout>
