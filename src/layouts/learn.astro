---
import { MarkdownContent } from 'astro';
import BaseLayout from '@/layouts/base.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import LearnNav from '@/components/LearnNav.astro';
import TableOfContents from '@/components/TableOfContents';

export interface Props {
  title: string;
  description: string;
  content: MarkdownContent;
}

const { title, description, content } = Astro.props;

const url = new URL(Astro.request.url);
const currentPage = url.pathname;
const headers = content.astro?.headers;
---

<BaseLayout {title} {description}>
  <Header />
  <div>
    <aside
      class="hidden lg:flex fixed lg:w-80 top-20 bottom-0 left-0 p-0 z-10 bg-transparent"
    >
      <LearnNav client:visible {currentPage} />
    </aside>
    <aside
      class="hidden lg:flex fixed lg:w-72 top-20 bottom-0 right-0 p-0 z-10"
    >
      <nav class="w-full py-4" aria-label="Table of Contents">
        <TableOfContents client:visible {headers} />
      </nav>
    </aside>
    <div class="flex flex-col h-full min-w-0 mx-0 lg:ml-80 lg:mr-72">
      <main class="mx-auto px-16 py-4 md:py-8">
        <slot />
      </main>
      <Footer />
    </div>
  </div>
</BaseLayout>
